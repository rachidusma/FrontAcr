(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{335:function(t,e,o){var content=o(360);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("e7f96d82",content,!0,{sourceMap:!1})},354:function(t,e,o){var content=o(388);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("42026166",content,!0,{sourceMap:!1})},355:function(t,e,o){var content=o(394);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("2fb66d53",content,!0,{sourceMap:!1})},359:function(t,e,o){"use strict";var n=o(335);o.n(n).a},360:function(t,e,o){(e=o(10)(!1)).push([t.i,"div.v-card div[class^=col][data-v-0449368d]{padding-top:0;padding-bottom:0}.overline[data-v-0449368d]{color:#336882;font-size:25px}",""]),t.exports=e},366:function(t,e,o){"use strict";o(56);var n=o(13),r={data:function(){return{dialog:!1,editItem:{},Vat:["0","6","12","25"],Unit:["hours","pound","pieces","hours","days","months","kilograms","grams","liters","meters","centimeters","millimeters","m²","m³","miles","kms"],Kind:["Goods","services"]}},props:["editItemId","editItemObject","edit"],watch:{editItemId:function(t){Object.assign(this.editItem,this.editItemObject)},edit:function(t){this.dialog=t}},methods:{close:function(){this.dialog=!1,this.editItem={},this.$emit("closed")},updateArticle:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$patch("/articles/".concat(t.editItem._id),t.editItem).then((function(e){t.modalUpadted()})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},saveArticle:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$post("/articles",t.editItem).then((function(e){t.modalUpadted()})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},modalUpadted:function(){this.$emit("updated"),this.editItem={},this.$emit("closed"),this.dialog=!1}}},l=(o(359),o(34)),c=o(37),d=o.n(c),v=o(145),m=o(133),_=o(118),f=o(378),h=o(325),x=o(369),k=o(317),y=o(130),C=o(380),w=o(416),T=o(328),D=o(417),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-btn",t._g({attrs:{color:"success"}},n),[t._v("Add new")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),o("v-card",{attrs:{outlined:""}},[o("v-card-title",{staticClass:"py-3 my-1"},[t.editItemId?o("h4",[t._v("Edit article")]):o("h4",[t._v("Add article")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-icon",{staticClass:"black--text",on:{click:t.close}},[t._v("mdi mdi-close")])],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-text",{staticClass:"py-2"},[o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[o("v-text-field",{attrs:{dense:"",label:"Artikelnamn*",placeholder:"Artikelnamn",outlined:"",color:"#336882"},model:{value:t.editItem.artikelnamn,callback:function(e){t.$set(t.editItem,"artikelnamn",e)},expression:"editItem.artikelnamn"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[o("v-text-field",{attrs:{dense:"",label:"Produktkod",placeholder:"Produktkod",outlined:"",color:"#336882"},model:{value:t.editItem.produktkod,callback:function(e){t.$set(t.editItem,"produktkod",e)},expression:"editItem.produktkod"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[o("v-text-field",{attrs:{dense:"",label:"Pris enhet",placeholder:"Pris enhet",outlined:"",type:"nymber",color:"#336882"},model:{value:t.editItem.pris_enhet,callback:function(e){t.$set(t.editItem,"pris_enhet",e)},expression:"editItem.pris_enhet"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[o("v-select",{attrs:{items:t.Unit,label:"Enhet",outlined:"",dense:"",color:"#336882"},model:{value:t.editItem.enhet,callback:function(e){t.$set(t.editItem,"enhet",e)},expression:"editItem.enhet"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[o("v-select",{attrs:{items:t.Vat,label:"Moms",outlined:"",dense:"",color:"#336882"},model:{value:t.editItem.moms,callback:function(e){t.$set(t.editItem,"moms",e)},expression:"editItem.moms"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[o("v-select",{attrs:{items:t.Kind,label:"typ",outlined:"",dense:"",color:"#336882"},model:{value:t.editItem.typ,callback:function(e){t.$set(t.editItem,"typ",e)},expression:"editItem.typ"}})],1)],1)],1)],1),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-3 pa-5"},[o("v-btn",{attrs:{depressed:""},on:{click:t.close}},[t._v("Close")]),t._v(" "),o("v-spacer"),t._v(" "),t.editItemId?o("v-btn",{attrs:{depressed:"",color:"success"},on:{click:t.updateArticle}},[t._v("Update")]):o("v-btn",{attrs:{color:"success",depressed:""},on:{click:t.saveArticle}},[t._v("Save")])],1)],1)],1)}),[],!1,null,"0449368d",null);e.a=component.exports;d()(component,{VBtn:v.a,VCard:m.a,VCardActions:_.a,VCardText:_.b,VCardTitle:_.c,VCol:f.a,VContainer:h.a,VDialog:x.a,VDivider:k.a,VIcon:y.a,VRow:C.a,VSelect:w.a,VSpacer:T.a,VTextField:D.a})},387:function(t,e,o){"use strict";var n=o(354);o.n(n).a},388:function(t,e,o){(e=o(10)(!1)).push([t.i,"div.v-card div[class^=col][data-v-865044c0]{padding-top:0;padding-bottom:0}",""]),t.exports=e},390:function(t,e,o){t.exports=o.p+"img/f093b59.png"},391:function(t,e,o){o(203);var n=o(392);o(426),e.link=void 0,e.pdf=function(t,e,o){var r=new n;function header(){r.setFont("times","italic"),r.setFontSize("30"),r.setTextColor(51,104,130),r.text("acredit",20,20),r.setFont("Helvetica",""),r.setFontSize("12"),r.setTextColor(0),r.text("invoice Title",20,30),r.text(e.customer.customername||"",105,25),r.text(e.customer.postadress||"",105,30),r.text(e.customer.postadress||"",105,20),r.line(20,35,200,35),r.autoTable({html:"#basic-table",margin:{top:38,left:20,right:20,bottom:10},theme:"plain"}),r.line(20,70,200,70)}function footer(){r.setFontSize(20),r.line(20,265,190,265),r.text("acredit",90,272),r.setFontSize(10),r.text("Godkänd för F-skatt",85,276),r.line(20,280,190,280),r.text("RUDSJÖTERRASSEN 3",30,285),r.text("136 40 Handen",35,290),r.text("Org.nr 5590303797",85,285),r.text("VAT-nummer",90,290)}if(function(){r.setFillColor(164,172,212),r.rect(20,200,170,35,"f"),r.setFontStyle("bold"),r.setTextColor(0),r.setFontSize(10),r.text("SUMMA EX MOMS",105,207),r.text(String(e.calculations.amountExVAT.toFixed(2)),165,207);var t=207;e.calculations.vat6&&(r.text("MOMS 25%",105,t+6),r.text(String(e.calculations.vat6.toFixed(2)),165,t+6),t+=6),e.calculations.vat12&&(r.text("MOMS 12%",105,t+6),r.text(String(e.calculations.vat12.toFixed(2)),165,t+6),t+=6),e.calculations.vat25&&(r.text("MOMS 6%",105,t+6),r.text(String(e.calculations.vat25.toFixed(2)),165,t+6),t+=6),r.text("ÖRESAVRUNDNING",105,t+6),r.text(String(e.calculations.RoundedSum.toFixed(2)),165,t+6),r.setFillColor(54,64,107),r.rect(20,232,170,6,"f"),r.setFontSize(12),r.text("ANGE REFERENS",20,243),r.setFontSize(10),r.text("<Sätts automatiskt>",20,248),r.setFontSize(12),r.text("TILL BANKGIRO",62,243),r.setFontSize(10),r.text("5124-4093",62,248),r.setFontSize(12),r.text("FÖRFALLODATUM",100,243),r.setFontSize(10),r.text(String(e.invoice.dateTo),100,248),r.setFontSize(12),r.text("SUMMA ATT BETALA",145,243),r.setFontSize(10),r.setFontStyle("bold"),r.text("".concat(e.calculations.totalSumToPay.toFixed(2)," kr"),177,248),r.setFontSize(12),r.text("BETALNINGSVILLKOR",144,257),r.setFontSize(10),r.setFontStyle("bold"),r.text("".concat(e.invoice.dagar," Dagar"),177,263)}(),e.draggableItems.length>15){r.text("Se fakturaspecifikation på följande sidor",20,90),r.addPage(),r.autoTable({html:"#products-table",margin:{top:70,left:20,right:20,bottom:60},headStyles:{fillColor:"#0d5892"}});for(var l=r.internal.getNumberOfPages(),i=1;i<=l;i++)r.setPage(i),header(),footer(),r.setFontSize(10),r.text("Page ".concat(i," of ").concat(l),5,292)}else header(),r.autoTable({html:"#products-table",margin:{top:70,left:20,right:20,bottom:60},pageBreak:"avoid"}),footer(),r.setFontSize(10),r.text("Page 1 of 1",5,292);if(!t){var c=new File([r.output("blob")],"".concat(o,".pdf"),{type:"pdf"}),data=new FormData;return data.append("file",c),{data:data,doc:r}}r.save("".concat(o,".pdf"))}},393:function(t,e,o){"use strict";var n=o(355);o.n(n).a},394:function(t,e,o){(e=o(10)(!1)).push([t.i,".gray[data-v-0478835a]{background-color:#f5f7f9;padding-top:30px}.sortable[data-v-0478835a]{display:block;border:1px solid #e1e5e8;cursor:pointer;color:#36406b}.items[data-v-0478835a],.sortable[data-v-0478835a]{width:100%}.item[data-v-0478835a]{font-size:.8rem}.flip-list-move[data-v-0478835a]{transition:transform .5s}.no-move[data-v-0478835a]{transition:transform 0s}.ghost[data-v-0478835a]{opacity:.5;background:#c8ebfb}.list-group[data-v-0478835a]{min-height:20px}.list-group-item[data-v-0478835a]{cursor:move}.list-group-item i[data-v-0478835a]{cursor:pointer}",""]),t.exports=e},411:function(t,e,o){"use strict";o(12),o(7),o(5),o(4),o(8),o(142),o(16),o(56);var n=o(13),r=o(24),l=o(2),c=o(425),d=o.n(c),v={props:["customername","customernameFromVuex"],data:function(){return{customer:{customername:"",orgnummer:"",vatnummer:"",kundnummer:"",postadress:"",postadress2:"",postnummer:"",stad:"",kontaktperson:"",country:"",epost:"",dagar:0,overdueinterest:0},isLoading:!1,items:[],IndividualsOrCorporations:"1",search:null,dialog:!1,editUserModal:!1}},beforeMount:function(){this.getUsers()},watch:{customername:function(t){this.getUsers()},customer:function(t){"undefined"!=t&&(this.$store.commit("setCustomer",t),this.$store.commit("setDagar",t.dagar),this.$store.commit("setOverduePayment",t.overdueinterest))},search:function(t){if(!(this.items.length>0)){this.isLoading=!0;this.$auth.getToken("local");this.getUsers()}}},methods:{getUsers:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$axios.setToken(t.$auth.getToken("local")),e.next=3,t.$axios.$get("/customers").then((function(e){if(t.items=e,t.customername){var o=e.filter((function(e){return e.customername==t.customername}));t.$store.commit("setCustomer",o[0]),Object.assign(t.customer,o[0])}else if(t.customernameFromVuex){var n=e.filter((function(e){return e.customername==t.customernameFromVuex}));t.$store.commit("setCustomer",n[0]),Object.assign(t.customer,n[0])}})).catch((function(t){return console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},initialCustomer:function(t){null==this.customer||t?(this.editUserModal=!1,this.customer={customername:"",orgnummer:"",vatnummer:"",kundnummer:"",postadress:"",postadress2:"",postnummer:"",stad:"",kontaktperson:"",country:"",epost:"",dagar:0,overdueinterest:0}):this.editUserModal=!0},resetModal:function(){this.initialCustomer(),this.dialog=!1,this.editUserModal=!1},saveUser:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.setToken(t.$auth.getToken("local"));case 2:return e.next=4,t.$axios.$post("/customers",t.customer).then((function(e){t.resetModal(),t.getUsers(),t.customer={customername:"",orgnummer:"",vatnummer:"",kundnummer:"",postadress:"",postadress2:"",postnummer:"",stad:"",kontaktperson:"",country:"",epost:"",dagar:0,overdueinterest:0}})).catch((function(t){return console.log(t)}));case 4:case"end":return e.stop()}}),e)})))()},editUser:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.setToken(t.$auth.getToken("local"));case 2:return o=t.customer,e.next=5,t.$axios.$patch("/customers/".concat(o._id),o).then((function(e){t.dialog=!1,t.editUserModal=!0,Object.assign(t.customer,o)})).catch((function(t){return console.log(t)}));case 5:case"end":return e.stop()}}),e)})))()}}},m=(o(387),o(34)),_=o(37),f=o.n(_),h=o(550),x=o(145),k=o(133),y=o(118),C=o(378),w=o(325),T=o(369),D=o(317),S=o(130),I=o(551),O=o(552),V=o(380),R=o(328),$=o(417),component=Object(m.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-row",[o("v-col",{attrs:{cols:"12",sm:"6"}},[o("v-autocomplete",{attrs:{label:"Search Customer",placeholder:"Search for customer",clearable:"",outlined:"",dense:"","hide-selected":"",autofocus:"",items:t.items,"item-text":"customername","return-object":!0,loading:t.isLoading,"search-input":t.search},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e},change:function(e){return t.initialCustomer(null)}},scopedSlots:t._u([{key:"selection",fn:function(e){e.attr,e.on;var n=e.item;return[o("span",{staticClass:"py-0 my-0",domProps:{textContent:t._s(n.customername)}})]}},{key:"no-data",fn:function(){return[o("p",{staticClass:"grey--text mx-2"},[t._v("No DATA")])]},proxy:!0},{key:"item",fn:function(data){return["object"!=typeof data.item?[o("span",[t._v(t._s(data.item))])]:[o("div",{staticClass:"d-flex justify-space-between align-center py-5 px-2",staticStyle:{width:"100%"}},[o("p",{staticClass:"py-0 my-0 black--text"},[t._v(t._s(data.item.customername))]),t._v(" "),""!=data.item.orgnummer?o("small",{staticClass:"grey--text"},[o("i",[t._v("Org.No:")]),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(data.item.orgnummer)+"\n\t\t\t\t\t\t\t\t")]):o("small",{staticClass:"grey--text"},[o("i",[t._v("Customer number:")]),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(data.item.postnummer)+"\n\t\t\t\t\t\t\t\t\t")])])]]}}]),model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"3"}},[o("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[t.editUserModal?o("v-btn",t._g({staticClass:"mx-2",attrs:{color:"success"},on:{click:function(e){t.IndividualsOrCorporations=""!=t.customer.orgnummer?"2":"1"}}},n),[t._v("Edit")]):o("v-btn",t._g({staticClass:"mx-2",attrs:{color:"primary"}},n),[t._v("create new")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),o("v-card",[o("v-card-title",[o("h4",[t._v("New customer")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-icon",{staticClass:"black--text",on:{click:function(e){t.initialCustomer(2),t.dialog=!1}}},[t._v("mdi mdi-close")])],1),t._v(" "),o("v-divider"),t._v(" "),t.customer?o("v-card-text",[o("v-radio-group",{attrs:{row:""},model:{value:t.IndividualsOrCorporations,callback:function(e){t.IndividualsOrCorporations=e},expression:"IndividualsOrCorporations"}},[o("v-radio",{attrs:{label:"Individuals",value:"1"}}),t._v(" "),o("v-radio",{attrs:{label:"Corporations",value:"2"}})],1),t._v(" "),o("v-container",[o("v-row",[o("p",{staticClass:"overline"},[t._v("Personal informations")]),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:1==t.IndividualsOrCorporations?"Name*":"Company*",placeholder:"Customer full name",outlined:"",dense:""},model:{value:t.customer.customername,callback:function(e){t.$set(t.customer,"customername",e)},expression:"customer.customername"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},["2"==t.IndividualsOrCorporations?o("v-text-field",{attrs:{label:"Org-nummer",placeholder:"YYYYMMDD-NNNN",outlined:"",type:"number",dense:""},model:{value:t.customer.orgnummer,callback:function(e){t.$set(t.customer,"orgnummer",e)},expression:"customer.orgnummer"}}):t._e()],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},["1"==t.IndividualsOrCorporations?o("v-text-field",{attrs:{label:"Personal number",placeholder:"YYYYMMDD-NNNN",outlined:"",type:"number",dense:""},model:{value:t.customer.kundnummer,callback:function(e){t.$set(t.customer,"kundnummer",e)},expression:"customer.kundnummer"}}):t._e()],1),t._v(" "),2==t.IndividualsOrCorporations?o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"VAT number",placeholder:"YYYYMMDD-NNNN",outlined:"",type:"number",dense:""},model:{value:t.customer.vatnummer,callback:function(e){t.$set(t.customer,"vatnummer",e)},expression:"customer.vatnummer"}})],1):t._e(),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"Kundnummer",placeholder:"Kundnummer",outlined:"",type:"number",dense:""},model:{value:t.customer.kundnummer,callback:function(e){t.$set(t.customer,"kundnummer",e)},expression:"customer.kundnummer"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-divider"),t._v(" "),o("h1",{staticClass:"overline pt-4 pb-4"},[t._v("Contact informations")])],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"Postadress",placeholder:"Postadress",outlined:"",dense:""},model:{value:t.customer.postadress,callback:function(e){t.$set(t.customer,"postadress",e)},expression:"customer.postadress"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"Postadress 2",placeholder:"Postadress 2",outlined:"",dense:""},model:{value:t.customer.postadress2,callback:function(e){t.$set(t.customer,"postadress2",e)},expression:"customer.postadress2"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-text-field",{attrs:{label:"Postnummer",placeholder:"Postnummer",outlined:"",type:"number",dense:""},model:{value:t.customer.postnummer,callback:function(e){t.$set(t.customer,"postnummer",e)},expression:"customer.postnummer"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-text-field",{attrs:{label:"stad",placeholder:"stad",outlined:"",dense:""},model:{value:t.customer.stad,callback:function(e){t.$set(t.customer,"stad",e)},expression:"customer.stad"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"Kontaktperson",placeholder:"Kontaktperson",outlined:"",dense:""},model:{value:t.customer.kontaktperson,callback:function(e){t.$set(t.customer,"kontaktperson",e)},expression:"customer.kontaktperson"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"E-post",placeholder:"E-post",type:"email",outlined:"",dense:""},model:{value:t.customer.epost,callback:function(e){t.$set(t.customer,"epost",e)},expression:"customer.epost"}}),t._v(" "),o("v-divider")],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"Dröjsmålsränta (%)",placeholder:"Dröjsmålsränta",outlined:"",dense:""},model:{value:t.customer.overdueinterest,callback:function(e){t.$set(t.customer,"overdueinterest",e)},expression:"customer.overdueinterest"}})],1)],1)],1),t._v(" "),o("small",[t._v("*indicates required field")])],1):t._e(),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-3 pa-5"},[0==t.editUserModal?o("div",{staticClass:"d-flex",staticStyle:{width:"100%"}},[o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.resetModal}},[t._v("Close")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:t.saveUser}},[t._v("Save")])],1):1==t.editUserModal?o("div",{staticClass:"d-flex",staticStyle:{width:"100%"}},[o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"success"},on:{click:t.editUser}},[t._v("Edit")])],1):t._e()])],1)],1)],1)],1)],1),t._v(" "),""!=t.customer.customername?o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-row",[""!=t.customer.orgnummer?o("v-col",{staticClass:"align-center d-flex px-8",attrs:{cols:"12",sm:"auto"}},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("Org-number")]),t._v(" "),o("b",[t._v(t._s(t.customer.orgnummer))])])]):t._e(),t._v(" "),""!=t.customer.vatnummer?o("v-col",{staticClass:"align-center d-flex px-8",attrs:{cols:"12",sm:"auto"}},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("VAT number")]),t._v(" "),o("b",[t._v(t._s(t.customer.vatnummer))])])]):t._e(),t._v(" "),""!=t.customer.epost?o("v-col",{staticClass:"align-center d-flex px-8",attrs:{cols:"12",sm:"auto"}},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("Email")]),t._v(" "),o("b",[t._v(t._s(t.customer.epost))])])]):t._e(),t._v(" "),""!=t.customer.postadress?o("v-col",{staticClass:"align-center d-flex px-8",attrs:{cols:"12",sm:"auto"}},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("Address")]),t._v(" "),o("b",[t._v(t._s(t.customer.postadress))])])]):t._e()],1)],1):t._e()],1)}),[],!1,null,"865044c0",null),j=component.exports;f()(component,{VAutocomplete:h.a,VBtn:x.a,VCard:k.a,VCardActions:y.a,VCardText:y.b,VCardTitle:y.c,VCol:C.a,VContainer:w.a,VDialog:T.a,VDivider:D.a,VIcon:S.a,VRadio:I.a,VRadioGroup:O.a,VRow:V.a,VSpacer:R.a,VTextField:$.a});var A=o(119),P=o(581),F=o(391);function M(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var N=new Array,E=Object(P.a)(null,N,-12).join(""),U={data:function(){return{radioGroup:"",saveInvoiceBtnloading:!1,pdf_link:"",deliveryMethod:null}},props:["draggableItems","calculations","invoiceId","invoiceOcr","userId","extraInfo"],computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):M(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({saveInvoiceBtnDisabled:function(){return 0!=this.deliveryMethod&&!this.deliveryMethod}},Object(A.b)(["customer","invoice"])),methods:{downloedPDF:function(t,e){var o=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var r,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=o,t&&Object(F.pdf)(t,o,E),t){n.next=6;break}return l=Object(F.pdf)(t,o,e).data,c=Object(F.pdf)(t,o,e).doc,console.log(l),n.abrupt("return",new Promise((function(t,e){r.$axios.$post("/profile/file-upload",l,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data;"}}).then((function(e){r.pdf_link=e.location,console.log(r.pdf_link),t(c)})).catch((function(t){e(t)}))})));case 6:case"end":return n.stop()}}),n)})))()},saveInvoice:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,v,m;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.saveInvoiceBtnloading=!0,r=!!t,c=1==(l=e).deliveryMethod?"pdf":"e-invoice",d=l.invoiceOcr||E,t?null:Date.now(),v=l.extraInfo?l.extraInfo:null,m={published:r,invoicepaid:!1,salarypaid:!1,_id:l.invoiceId||null,userid:l.userId||null,customername:l.customer.customername,duedate:l.invoice.dateTo,overdueinterest:l.customer.overdueinterest,summa:l.calculations.amountExVAT,total:l.calculations.totalSumToPay,extra_info:v,leveransmetod:c,pdf_link:l.pdf_link,createdate:l.invoice.dateFrom,customerid:l.customer._id,ocrid:d,dagar:l.invoice.dagar},l.$axios.setToken(l.$auth.getToken("local")),l.downloedPDF(null,E).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.save("".concat(E,".pdf")),!l.$route.params.id){t.next=7;break}return m.pdf_link=l.pdf_link,t.next=5,l.$axios.$patch("/invoices/".concat(l.$route.params.id),m).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("edit",m),t.next=3,l.sendArticles(d);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t)}));case 5:t.next=11;break;case 7:return m.pdf_link=l.pdf_link,delete m._id,t.next=11,l.$axios.$post("/invoices",m).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("new",m),t.next=3,l.sendArticles(d);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t)}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),l.saveInvoiceBtnloading=!1;case 5:case"end":return o.stop()}}),o)})))()},sendArticles:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var n,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=e.draggableItems,r=0;case 2:if(!(r<n.length)){o.next=15;break}return n[r].invoiceid=t,delete n[r].__v,delete n[r]._id,delete n[r].id,delete n[r].total,delete n[r].userid,console.log(n[r]),o.next=12,e.$axios.$post("/articles",n[r]).then((function(t){return console.log("patched")}));case 12:r++,o.next=2;break;case 15:case"end":return o.stop()}}),o)})))()}}},B=o(553),K=o(554),L=o(555),Y=o(556),z=Object(m.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-col",{attrs:{cols:"12"}},[n("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[n("v-card-title",[n("h3",[t._v("Delivery method")])]),t._v(" "),n("v-card-text",[n("v-col",{attrs:{cols:"12",md:"12"}},[n("table",{staticStyle:{display:"none"},attrs:{id:"basic-table"}},[n("thead"),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("FAKTURA NR")]),t._v(" "),n("td",[t._v("Sätts automatiskt")]),t._v(" "),n("td",[t._v("KUND")]),t._v(" "),n("td",[t._v(t._s(t.customer.customername))])]),t._v(" "),n("tr",[n("td",[t._v("FAKTURADATUM")]),t._v(" "),n("td",[t._v(t._s(t.invoice.dateFrom))]),t._v(" "),n("td",[t._v("KUNDNR")]),t._v(" "),n("td",[t._v(t._s(t.customer.kundnummer))])]),t._v(" "),n("tr",[n("td",[t._v("RFALLODATUM")]),t._v(" "),n("td",[t._v(t._s(t.invoice.dateTo))]),t._v(" "),n("td",[t._v("ERT VAT NR")]),t._v(" "),n("td",[t._v(t._s(t.customer.vatnummer||""))])])])]),t._v(" "),n("table",{staticStyle:{display:"none"},attrs:{id:"products-table"}},[n("thead",[n("tr",[n("td",[t._v("BESKRIVNING")]),t._v(" "),n("td",[t._v("MOMS")]),t._v(" "),n("td",[t._v("ANTAL")]),t._v(" "),n("td",[t._v("À-PRIS")]),t._v(" "),n("td",[t._v("SUMMA")])])]),t._v(" "),n("tbody",t._l(t.draggableItems,(function(e,o){return n("tr",{key:o},[n("td",[t._v(t._s(e.artikelnamn))]),t._v(" "),n("td",[t._v(t._s(e.moms)+"%")]),t._v(" "),n("td",[t._v(t._s(e.number)+" "+t._s(e.enhet)+" ")]),t._v(" "),n("td",[t._v(t._s(e.pris_enhet)+" Kr")]),t._v(" "),e.text?n("td"):n("td",[t._v(t._s(e.total)+" Kr")])])})),0)]),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"12"}},[n("v-expansion-panels",{attrs:{accordion:"",hover:""},model:{value:t.deliveryMethod,callback:function(e){t.deliveryMethod=e},expression:"deliveryMethod"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("h3",{staticClass:"text--primary pb-3"},[t._v("Email to customer")])]),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("p",{staticClass:"pa-0 ma-0 text--secondary"},[t._v("Send the invoice via Email.")])])],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-expansion-panel-content",{staticClass:"gray"},[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"5",sm:"12"}},[n("p",{staticClass:"overline"},[t._v("Type email of the customer")]),t._v(" "),n("v-text-field",{attrs:{label:"Email",outlined:"",color:"#336882",dense:""}}),t._v(" "),n("p",{staticClass:"overline"},[t._v("Invoice Delivery options")]),t._v(" "),n("v-radio-group",{model:{value:t.radioGroup,callback:function(e){t.radioGroup=e},expression:"radioGroup"}},[n("v-radio",{attrs:{label:"Send the invoice with a link to PDF",value:"v",color:"#336882"}}),t._v(" "),n("v-radio",{attrs:{label:"Send the invoice and attatch PDF File",value:"f",color:"#336882"}})],1),t._v(" "),n("v-btn",{attrs:{outlined:"",color:"#336882"}},[t._v("Send")])],1),t._v(" "),n("v-col",{attrs:{cols:"12",md:"5",sm:"12"}},[n("p",{staticClass:"overline"},[t._v("Send Your invoice as an Email")])])],1)],1)],1)],1),t._v(" "),n("v-expansion-panel",[n("v-expansion-panel-header",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("h3",{staticClass:"text--primary pb-3"},[t._v("Download PDF")])]),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("p",{staticClass:"pa-0 ma-0 text--secondary"},[t._v("You can preview your invoice before publishing it.")])])],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-expansion-panel-content",{staticClass:"gray pa-5"},[n("v-row",[n("v-col",{staticClass:"text--secondary",attrs:{cols:"6"}},[n("p",[t._v("You can preview your invoice before publishing it.")]),t._v(" "),n("v-btn",{on:{click:function(e){return t.downloedPDF("dsa")}}},[t._v("Preview PDF")])],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("img",{attrs:{src:o(390),alt:"invoice"}})])],1)],1)],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-btn",{staticClass:"ma-2",attrs:{loading:t.saveInvoiceBtnloading,disabled:t.saveInvoiceBtnloading,color:"secondary"},on:{click:function(e){return t.saveInvoice("")}}},[t._v("Save as draft")]),t._v(" "),n("v-btn",{staticClass:"ma-2",attrs:{loading:t.saveInvoiceBtnloading,disabled:t.saveInvoiceBtnDisabled,color:"primary"},on:{click:t.saveInvoice}},[t._v(t._s(1==t.deliveryMethod?"Download and Publish":"Publish"))])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null),G=z.exports;f()(z,{VBtn:x.a,VCard:k.a,VCardText:y.b,VCardTitle:y.c,VCol:C.a,VContainer:w.a,VDivider:D.a,VExpansionPanel:B.a,VExpansionPanelContent:K.a,VExpansionPanelHeader:L.a,VExpansionPanels:Y.a,VRadio:I.a,VRadioGroup:O.a,VRow:V.a,VTextField:$.a});o(48);var Q=o(15);function H(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e};var J=(new Date).toISOString().substr(0,10),W={props:["todatefromDraft","datefromDraft"],data:function(t){return{date:(new Date).toISOString().substr(0,10),toDate:J||(new Date).toISOString().substr(0,10),delivery:"Fritt vårt lager",overduePayment:"12%",menu1:!1,menu2:!1,dialog:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?H(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):H(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({days:function(){var t=(new Date(this.toDate)-new Date(this.date))/864e5;return t>=0?t:0},computedDateFormatted:function(){return this.formatDate(this.date)},computedToDateFormatted:function(){if(this.invoice.dagar>0){console.log(this.invoice.dagar);var t=new Date(this.date);return J=t.addDays(this.invoice.dagar).toISOString().substr(0,10),this.$store.commit("dateTo",J),console.log(this.invoice.dagar),this.formatDate(J)}return this.formatDate(J)}},Object(A.b)(["invoice"])),mounted:function(){this.delivery="Fritt vårt lager",this.overduePayment="12%",this.fromDraft&&this.assignDates(this.fromDraft)},watch:{todatefromDraft:function(t){this.assignDates()},datefromDraft:function(t){this.assignDates()},delivery:function(t){this.$store.commit("setDelivery",t)},overduePayment:function(t){this.$store.commit("setOverduePayment",t)},date:function(t){this.$store.commit("dateFrom",t)},toDate:function(t){this.$store.commit("dateTo",t)}},methods:{assignDates:function(){this.toDate=this.todatefromDraft,this.date=this.datefromDraft},formatDate:function(t){if(!t)return null;var e=t.split("-"),o=Object(Q.a)(e,3),n=o[0],r=o[1],l=o[2];return"".concat(r,"/").concat(l,"/").concat(n)}}},X=o(565),Z=o(423),tt=o(557),et=Object(m.a)(W,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-col",{attrs:{cols:"12"}},[o("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[o("v-card-title",[o("h3",{staticClass:"pa-0 ma-0"},[t._v("\n\t\t\t\tTerm\n\t\t\t\t"),o("v-tooltip",{attrs:{bottom:"",color:"rgba(0, 0, 0, 1)","max-width":"250"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-icon",t._g({staticClass:"font1"},n),[t._v("mdi mdi-information")])]}}])},[t._v(" "),o("span",[o("b",[t._v("Days")]),t._v(" "),o("br"),t._v("Number of days before the payment is due.\n\t\t\t\t\t\t"),o("br"),t._v(" "),o("br"),t._v(" "),o("b",[t._v("Interest on overdue payments")]),t._v(" "),o("br"),t._v("This is where you define the interest rate added when a payment is overdue. Remember that you must create a new invoice with the added interest rate and send it to your customer. Invoices with interest rates also have to be recorded manually.\n\t\t\t\t\t\t"),o("br"),t._v(" "),o("br"),t._v(" "),o("b",[t._v("Delivery")]),t._v(" "),o("br"),t._v("Define how the goods are delivered. Warehouse means that the risk is taken over by the customer as soon as the goods leave the warehouse.\n\t\t\t\t\t")])])],1),t._v(" "),o("v-spacer"),t._v(" "),o("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-btn",t._g({attrs:{color:"success",dark:"",right:""}},n),[t._v("Edit")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),o("v-card",[o("v-card-title",[o("h4",[t._v("Terms")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-icon",{staticClass:"black--text",on:{click:function(e){t.dialog=!1}}},[t._v("mdi mdi-close")])],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-text",[o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{type:"number",hint:"will show like 13%",label:"Interest on overdue payment"},model:{value:t.overduePayment,callback:function(e){t.overduePayment=e},expression:"overduePayment"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"Delivery"},model:{value:t.delivery,callback:function(e){t.delivery=e},expression:"delivery"}})],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-3 pa-5"},[o("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"success"},on:{click:function(e){t.dialog=!1}}},[t._v("Save")])],1)],1)],1)],1),t._v(" "),o("v-card-text",[o("v-row",[o("v-col",{attrs:{cols:"12",lg:"3"}},[o("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-text-field",t._g({attrs:{label:"From Date",hint:"MM/DD/YYYY format","persistent-hint":"",readonly:"",dense:"",outlined:""},model:{value:t.computedDateFormatted,callback:function(e){t.computedDateFormatted=e},expression:"computedDateFormatted"}},n))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),o("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu2=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),t._v(" "),o("v-col",{attrs:{cols:"12",lg:"3"}},[o("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-text-field",t._g({attrs:{label:"To Date",hint:"MM/DD/YYYY format","persistent-hint":"",readonly:"",dense:"",outlined:""},model:{value:t.computedToDateFormatted,callback:function(e){t.computedToDateFormatted=e},expression:"computedToDateFormatted"}},n))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[t._v(" "),o("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1)],1),t._v(" "),o("v-col",{attrs:{cols:"12",lg:"2"}},[o("p",{staticClass:"py-0 my-0"},[t._v("Days")]),t._v("\n\t\t\t\t\t"+t._s(t.invoice.dagar>0?t.invoice.dagar:t.days)+"\n\t\t\t\t")])],1),t._v(" "),o("v-row",[o("v-col",{attrs:{cols:"12",sm:"auto"}},[o("p",{staticClass:"text--secondary"},[t._v("Delivery")]),t._v(" "),o("span",{staticClass:"text--primary"},[t._v(t._s(t.delivery))])]),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"auto"}},[o("p",{staticClass:"text--secondary"},[t._v("Interest on overdue payment")]),t._v(" "),o("span",{staticClass:"text--primary"},[t._v(t._s(t.overduePayment)+"%")])])],1)],1)],1)],1)}),[],!1,null,null,null),at=et.exports;function st(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}f()(et,{VBtn:x.a,VCard:k.a,VCardActions:y.a,VCardText:y.b,VCardTitle:y.c,VCol:C.a,VDatePicker:X.a,VDialog:T.a,VDivider:D.a,VIcon:S.a,VMenu:Z.a,VRow:V.a,VSpacer:R.a,VTextField:$.a,VTooltip:tt.a});var ot={middleware:"auth",data:function(t){return{drag:!1,createNewModal:!1,dialog:!1,articles:[],selection_value:null,addTextDialog:!1,addTextVal:null,hideAddText:!1,Vat:["0","6","12","25"],Unit:["hours","pound","pieces","hours","days","months","kilograms","grams","liters","meters","centimeters","millimeters","m²","m³","miles","kms"],Kind:["Goods","services"],materialType:["Child Services","Data and IT services","Removal services","Clothing and textile care","Personal help and care","Repair of appliances","Snow shoveling","Cleaning","Gardening"],serviceType:["Child Services","Data and IT services","Removal services","Clothing and textile care","Personal help and care","Repair of appliances","Snow shoveling","Cleaning","Gardening"],draggableItems:[],editDraggableDialog:!1,checkbox:!1,checkBoxLabel:"Eligible as a Rot/Rut deduction ",edit:!1,indexBedoreEdit:null,calculations:{vat6:0,vat12:0,vat25:0,totalSumToPay:0,amountExVAT:0,RoundedSumState:!1,RoundedSum:0},oldIndex:"",newIndex:"",customerNameForCustomerSection:null,datesForTermSection:null,todatefromDraft:null,invoiceId:null,userId:null,invoiceOcr:null}},components:{customerSection:j,termSection:at,ArticleModal:o(366).a,dividerySection:G,draggable:d.a},props:["draft"],computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?st(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):st(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}},saveAsItemBtnState:function(){return!this.selection_value||1!=this.createNewModal||("object"==Object(r.a)(this.selection_value.artikelnamn)||"object"==Object(r.a)(this.selection_value.pris_enhet)||"object"==Object(r.a)(this.selection_value.moms)||"object"==Object(r.a)(this.selection_value.typ))},slection:function(){return this.selection_value.unit}},Object(A.b)(["customer","invoice"])),watch:{invoiceId:function(t){this.addDraft()},userId:function(t){this.addDraft()},draft:function(t){this.addDraft()},datesForTermSection:function(t){this.addDraft()}},beforeMount:function(){this.getArticles()},mounted:function(){this.draft&&this.addDraft()},methods:{addDraft:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.customerNameForCustomerSection=t.draft.customername,t.invoiceId=t.draft._id,t.invoiceOcr=t.draft.ocrid,t.userId=t.draft.userid,t.datesForTermSection=new Date(t.draft.createdate).toISOString().substr(0,10),t.todatefromDraft=new Date(t.draft.duedate).toISOString().substr(0,10),e.next=8,t.$axios.$get("articles/invoice/".concat(t.draft.ocrid)).then((function(e){console.log("articles res => ",e),t.draggableItems=e}));case 8:case"end":return e.stop()}}),e)})))()},deleteDraft:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$delete("/invoices/".concat(t.$route.params.id)).then((function(e){return t.$router.push("/invoices")})).catch((function(t){return console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},sort:function(){this.list=this.list.sort((function(a,b){return a.order-b.order}))},resetDraggableModal:function(){this.editDraggableDialog=!1,this.edit=!1,this.createNewModal=!1,this.selection_value=null},resetModal:function(){this.dialog=!1,this.edit=!1,this.createNewModal=!1,this.selection_value=null},createNewModalfn:function(){this.createNewModal=!0,this.selection_value={artikelnamn:null,enhet:null,pris_enhet:null,moms:null,typ:null,produktkod:null,number:1,rotRutType:null,materialType:null}},changeCheckBoxLabel:function(){this.checkBoxLabel="Eligible as a Rot/Rut "+this.selection_value.typ,this.selection_value.materialType=null},setQuantity:function(){this.selection_value&&(this.selection_value.number=1)},addToInvoice:function(){var t=this.draggableItems,e=Object.assign({},this.selection_value);if(this.selection_value=null,console.log(e),delete e.materialType,delete e.rotRutType,this.editedIndex>-1){e.id=0;var o=new Array;e.produktkod=Object(P.a)(null,o,-12).join(""),Object.assign(t[this.editedIndex],e),this.doCalculations(t)}else{e.id=t.length;var n=new Array;e.produktkod=Object(P.a)(null,n,-12).join(""),e.total=e.number*e.pris_enhet,t.push(e),this.doCalculations(t)}this.resetModal()},saveAsItem:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.setToken(t.$auth.getToken("local"));case 2:return o=t.selection_value.moms.slice(0,t.selection_value.moms.length-1),n=new Array,e.next=6,t.$axios.$post("/articlepatterns",{artikelnamn:t.selection_value.artikelnamn,enhet:t.selection_value.enhet,produktkod:Object(P.a)(null,n,-12).join(""),pris_enhet:Number(t.selection_value.pris_enhet),moms:o,number:t.selection_value.number,typ:t.selection_value.typ}).then((function(e){t.getArticles(),t.resetModal()})).catch((function(t){return console.log(t)}));case 6:case"end":return e.stop()}}),e)})))()},Delete:function(){var t=this,e=this.draggableItems.findIndex((function(i){return i.id===t.selection_value.id}));this.draggableItems.splice(e,1),this.resetDraggableModal(),this.doCalculations(this.draggableItems)},update:function(){var t=Object.assign({},this.selection_value);this.selection_value=null,t.total=t.number*t.pris_enhet;var e=this.draggableItems.findIndex((function(i){return i._id===t._id}));e>-1?(Object.assign(this.draggableItems[e],t),this.resetDraggableModal(),this.doCalculations(this.draggableItems)):console.log(e)},deleteText:function(){var t=this.draggableItems.findIndex((function(i){return 1==i.text}));this.draggableItems.splice(t,1),this.addTextDialog=!1,this.hideAddText=!1,this.edit=!1,this.addTextVal=null},addText:function(){if(this.selection_value={artikelnamn:this.addTextVal,text:!0},this.edit){var t=this.draggableItems.findIndex((function(i){return 1==i.text}));t>-1?(Object.assign(this.draggableItems[t],this.selection_value),this.addTextDialog=!1,this.hideAddText=!0):console.log(t)}else this.addToInvoice(),this.addTextDialog=!1,this.hideAddText=!0},getArticles:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.setToken(t.$auth.getToken("local"));case 2:return e.next=4,t.$axios.$get("/articlepatterns").then((function(e){t.articles=e})).catch((function(t){return console.log(t)}));case 4:case"end":return e.stop()}}),e)})))()},editDraggable:function(element){element.text?(this.addTextDialog=!0,this.hideAddText=!1,this.edit=!0):(this.editDraggableDialog=!0,this.selection_value=Object.assign({},this.selection_value,element),this.edit=!0,this.indexBedoreEdit=this.draggableItems.indexOf(this.selection_value))},RoundTotalSum:function(){calcs.RoundedSumState&&(calcs.totalSumToPay=Math.round(calcs.totalSumToPay))},doCalculations:function(t){var e=this.calculations;e.amountExVAT=0,e.vat6=0,e.vat12=0,e.vat25=0,e.totalSumToPay=0,e.RoundedSum=0,t.map((function(t){t.text||(e.amountExVAT+=Number(t.total),"6"==t.moms?e.vat6+=.6*Number(t.total):"12"==t.moms?e.vat12+=.12*Number(t.total):"25"==t.moms&&(e.vat25+=.25*Number(t.total)),e.totalSumToPay=e.amountExVAT+e.vat6+e.vat12+e.vat25,e.RoundedSum=Math.round(e.totalSumToPay)-e.totalSumToPay)})),isNaN(e.RoundedSum)&&(e.RoundedSum=0),isNaN(e.totalSumToPay)&&(e.totalSumToPay=0),isNaN(e.amountExVAT)&&(e.amountExVAT=0)},onEnd:function(t){console.log(t),this.oldIndex=t.oldIndex,this.newIndex=t.newIndex}}},nt=(o(393),o(371)),it=o(493),lt=o(547),ct=o(131),ut=o(83),vt=o(416),mt=o(558),pt=o(559),_t=Object(m.a)(ot,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-breadcrumbs",{staticClass:"pa-0 ma-0",attrs:{items:[{text:"invoices",href:"/invoices"},{text:"create new invoice",disabled:!0}]}})],1),t._v(" "),o("v-col",{staticClass:"d-flex",attrs:{cols:"12"}},[o("h1",{staticClass:"d-inline-block"},[t._v("Skapa en faktura")]),t._v(" "),o("v-spacer"),t._v(" "),this.draft&&!this.draft.published?o("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-btn",t._g({staticClass:"ml-2",attrs:{outlined:""}},n),[t._v("\n\t\t\t\t\t\tMore\n\t\t\t\t\t\t"),o("v-icon",{staticClass:"font1"},[t._v("mdi mdi-chevron-down")])],1)]}}],null,!1,2904043991)},[t._v(" "),o("v-list",[this.draft?o("v-list-item",{on:{click:t.deleteDraft}},[t._v("Delete")]):t._e()],1)],1):t._e()],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[o("h3",{staticClass:"text--primary pb-3"},[t._v("Customer:")]),t._v(" "),o("customerSection",{attrs:{customernameFromVuex:t.customer.customername,customername:t.customerNameForCustomerSection}})],1)],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[o("h3",{staticClass:"mb-3"},[t._v("Items/services:")]),t._v(" "),o("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("div",{staticClass:"pa-3 mt-3",staticStyle:{border:"1px dashed #aaa"}},[o("v-btn",t._g({attrs:{dark:""}},n),[t._v("Add new row")]),t._v(" "),t.hideAddText?t._e():o("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-btn",t._g({attrs:{color:"red lighten-2",dark:""}},n),[t._v("Add text")])]}}],null,!0),model:{value:t.addTextDialog,callback:function(e){t.addTextDialog=e},expression:"addTextDialog"}},[t._v(" "),o("v-card",[o("v-card-title",[o("h4",[t._v("Add new row")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-icon",{staticClass:"black--text",on:{click:function(e){t.addTextDialog=!1}}},[t._v("mdi mdi-close")])],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-text",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-textarea",{attrs:{outlined:"",name:"add-text",label:"Description"},model:{value:t.addTextVal,callback:function(e){t.addTextVal=e},expression:"addTextVal"}})],1)],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-3 pa-5"},[t.edit?o("v-btn",{attrs:{color:"error"},on:{click:t.deleteText}},[t._v("Delet")]):t._e(),t._v(" "),o("v-btn",{attrs:{text:""},on:{click:function(e){t.addTextDialog=!1}}},[t._v("Close")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.addText()}}},[t._v("Add to invoice")])],1)],1)],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),o("v-card",[o("v-card-title",[o("h4",[t._v("Add new row")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-icon",{staticClass:"font1",on:{click:t.resetModal}},[t._v("mdi mdi-close")])],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-text",[o("v-container",[t.createNewModal?o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{outlined:"",dense:"",label:"artikelnamn"},model:{value:t.selection_value.artikelnamn,callback:function(e){t.$set(t.selection_value,"artikelnamn",e)},expression:"selection_value.artikelnamn"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"6"}},[o("v-text-field",{attrs:{outlined:"",type:"number",dense:"",label:"Quantity"},model:{value:t.selection_value.number,callback:function(e){t.$set(t.selection_value,"number",e)},expression:"selection_value.number"}})],1),t._v(" "),o("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[o("v-select",{attrs:{items:t.Unit,"item-text":"slection","item-value":"slection",label:"Unit",outlined:"",dense:""},model:{value:t.selection_value.enhet,callback:function(e){t.$set(t.selection_value,"enhet",e)},expression:"selection_value.enhet"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{dense:"",outlined:"",value:"1",type:"number",label:"Price / unit ex VAT"},model:{value:t.selection_value.pris_enhet,callback:function(e){t.$set(t.selection_value,"pris_enhet",e)},expression:"selection_value.pris_enhet"}})],1),t._v(" "),o("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[o("v-select",{attrs:{items:t.Vat,dense:"","item-text":" "+t.Vat+" %",label:"VAT",outlined:""},model:{value:t.selection_value.moms,callback:function(e){t.$set(t.selection_value,"moms",e)},expression:"selection_value.moms"}})],1),t._v(" "),o("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[o("v-select",{attrs:{items:t.Kind,label:"Kind",outlined:"",dense:""},on:{change:t.changeCheckBoxLabel},model:{value:t.selection_value.typ,callback:function(e){t.$set(t.selection_value,"typ",e)},expression:"selection_value.typ"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("p",{staticClass:"font-weight-black"},[t._v("Amount ex VAT")]),t._v(" "),o("p",{staticClass:"font-weight-medium"},[t._v(t._s(t.selection_value.pris_enhet*t.selection_value.number||"0,00")+" Kr")])])],1):o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-row",[o("v-col",[o("v-autocomplete",{attrs:{items:t.articles,placeholder:"Search For saved item",clearable:"",outlined:"",dense:"",color:"blue-grey lighten-2",label:"Description","item-text":"artikelnamn","return-object":!0},on:{change:t.setQuantity},scopedSlots:t._u([{key:"selection",fn:function(data){return[o("span",{staticClass:"black--text"},[t._v(t._s(data.item.artikelnamn))])]}},{key:"prepend-item",fn:function(){return[o("v-btn",{staticClass:"m-2",attrs:{outlined:"",large:"",block:""},on:{click:t.createNewModalfn}},[t._v("+ Create new")])]},proxy:!0},{key:"no-data",fn:function(){return[o("p",{staticClass:"grey--text mx-2"},[t._v("No DATA")])]},proxy:!0},{key:"item",fn:function(data){return["object"!=typeof data.item?[o("span",[t._v(t._s(data.item))])]:[o("div",{staticClass:"d-flex justify-space-between align-center",staticStyle:{width:"100%"}},[o("p",{staticClass:"black--text"},[t._v(t._s(data.item.artikelnamn))]),t._v(" "),o("small",{staticClass:"grey--text"},[o("i",[t._v("pris_enhet:")]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(data.item.pris_enhet)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])])]]}}],null,!1,4007511400),model:{value:t.selection_value,callback:function(e){t.selection_value=e},expression:"selection_value"}})],1),t._v(" "),null!=t.selection_value?o("v-col",{attrs:{cols:"12",md:"3"}},[o("v-btn",{on:{click:function(e){t.createNewModal=!0}}},[t._v("Edit more")])],1):t._e()],1)],1),t._v(" "),null!=t.selection_value?o("v-row",[o("v-col",{attrs:{cols:"12",sm:"6"}},[o("v-text-field",{attrs:{value:t.selection_value.number,suffix:t.selection_value.enhet,label:"Quantity",type:"number",dense:""},model:{value:t.selection_value.number,callback:function(e){t.$set(t.selection_value,"number",e)},expression:"selection_value.number"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"6"}},[o("v-text-field",{attrs:{value:t.selection_value.pris_enhet,label:"Price / unit ex VAT",type:"number",dense:""},model:{value:t.selection_value.pris_enhet,callback:function(e){t.$set(t.selection_value,"pris_enhet",e)},expression:"selection_value.pris_enhet"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("p",{staticClass:"font-weight-black"},[t._v("Amount ex VAT")]),t._v(" "),o("p",{staticClass:"font-weight-medium"},[t._v(t._s(Number(t.selection_value.number)*Number(t.selection_value.pris_enhet)||"0,00")+" Kr")])])],1):t._e(),t._v(" "),null==t.selection_value?o("v-btn",{staticClass:"m-2 text-left",attrs:{text:"",large:""},on:{click:t.createNewModalfn}},[t._v("+ Create new")]):t._e()],1),t._v(" "),o("v-row",[null!=t.selection_value?o("v-col",{attrs:{cols:"12"}},[o("v-tooltip",{attrs:{bottom:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-checkbox",t._g({attrs:{label:t.checkBoxLabel},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}},n))]}}],null,!1,1534827326)},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tRot/Rut will be accounted for if this box is checked AND if you have activated Rot/Rut on the invoice\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),null!=t.selection_value&&t.checkbox?o("v-row",[o("v-col",[o("p",{staticClass:"header"},[t._v("Select type")]),t._v(" "),o("v-radio-group",{attrs:{row:""},model:{value:t.selection_value.rotRutType,callback:function(e){t.$set(t.selection_value,"rotRutType",e)},expression:"selection_value.rotRutType"}},t._l(["Rot","Rut"],(function(t){return o("v-radio",{key:t,attrs:{label:t,value:t}})})),1)],1),t._v(" "),o("v-col",{staticClass:"d-flex",attrs:{cols:"12"}},["Goods"==t.selection_value.typ?o("v-select",{attrs:{dense:"",items:t.materialType,label:"Type of material"},model:{value:t.selection_value.materialType,callback:function(e){t.$set(t.selection_value,"materialType",e)},expression:"selection_value.materialType"}}):"services"==t.selection_value.typ?o("v-select",{attrs:{dense:"",items:t.serviceType,label:"Type of service"},model:{value:t.selection_value.materialType,callback:function(e){t.$set(t.selection_value,"materialType",e)},expression:"selection_value.materialType"}}):t._e()],1)],1):t._e()],1):t._e()],1)],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-3 pa-5"},[o("div",[o("v-btn",{staticClass:"mt-2",attrs:{text:""},on:{click:t.resetModal}},[t._v("Cancel")]),t._v(" "),o("v-btn",{staticClass:"mt-2 d-block d-sm-inline",attrs:{disabled:t.saveAsItemBtnState},on:{click:t.saveAsItem}},[t._v("Save as item")])],1),t._v(" "),o("v-spacer"),t._v(" "),o("div",[o("v-btn",{staticClass:"mt-2",attrs:{disabled:!t.selection_value,color:"success"},on:{click:t.addToInvoice}},[t._v("Add to invoice")])],1)],1)],1)],1),t._v(" "),o("v-row",[t.draggableItems.length>0?o("v-col",{attrs:{cols:"12"}},[o("v-row",[o("v-col",{attrs:{cols:"4",md:"4"}},[o("span",{staticClass:"item",staticStyle:{"padding-left":"15px"}},[t._v("artikelnamn")])]),t._v(" "),o("v-col",{attrs:{cols:"2",md:"2"}},[o("span",{staticClass:"item"},[t._v("moms")])]),t._v(" "),o("v-col",{attrs:{cols:"2",md:"2"}},[o("span",{staticClass:"item"},[t._v("number")])]),t._v(" "),o("v-col",{attrs:{cols:"2",md:"2"}},[o("span",{staticClass:"item"},[t._v("Unit price")])]),t._v(" "),o("v-col",{attrs:{cols:"2",md:"2"}},[o("span",{staticClass:"item"},[t._v("Total (ex tax)")])])],1)],1):t._e(),t._v(" "),o("draggable",t._b({staticClass:"items",attrs:{"ghost-class":"ghost"},on:{end:t.onEnd},model:{value:t.draggableItems,callback:function(e){t.draggableItems=e},expression:"draggableItems"}},"draggable",t.dragOptions,!1),[o("transition-group",{attrs:{type:"transition",name:t.drag?null:"flip-list"}},t._l(t.draggableItems,(function(element,e){return o("div",{key:e+"-"+element.artikelnamn,staticClass:"sortable mx-3",attrs:{id:e},on:{click:function(e){return e.stopPropagation(),t.editDraggable(element)}}},[o("v-row",[o("v-col",{attrs:{cols:"4"}},[o("v-btn",{attrs:{icon:""}},[o("v-icon",[t._v("mdi-menu")])],1),t._v(" "),o("strong",{staticClass:"item"},[t._v(t._s(element.artikelnamn))])],1),t._v(" "),o("v-col",{attrs:{cols:"2",md:"2"}},[o("span",{staticClass:"item"},[t._v(t._s(element.moms))])]),t._v(" "),o("v-col",{attrs:{cols:"2",md:"2"}},[o("span",{staticClass:"item"},[t._v(t._s(element.number)+" "+t._s(element.enhet))])]),t._v(" "),o("v-col",{attrs:{cols:"2",md:"2"}},[element.text?t._e():o("span",{staticClass:"item"},[t._v(t._s(element.pris_enhet)+" Kr")]),t._v(" "),element.text?o("span",{staticClass:"item"}):t._e()]),t._v(" "),o("v-col",{attrs:{cols:"2",md:"2"}},[element.text?t._e():o("span",{staticClass:"item"},[t._v(t._s(element.total)+" Kr")]),t._v(" "),element.text?o("span",{staticClass:"item"}):t._e()])],1)],1)})),0)],1),t._v(" "),o("v-dialog",{attrs:{scrollable:"","max-width":"600px"},model:{value:t.editDraggableDialog,callback:function(e){t.editDraggableDialog=e},expression:"editDraggableDialog"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[o("h4",[t._v("Edit product")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-icon",{staticClass:"black--text",on:{click:function(e){t.editDraggableDialog=!1}}},[t._v("mdi mdi-close")])],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-text",[o("v-container",[t.selection_value?o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{dense:"",label:"artikelnamn"},model:{value:t.selection_value.artikelnamn,callback:function(e){t.$set(t.selection_value,"artikelnamn",e)},expression:"selection_value.artikelnamn"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"6"}},[o("v-text-field",{attrs:{type:"number",dense:"",label:"Quantity"},model:{value:t.selection_value.number,callback:function(e){t.$set(t.selection_value,"number",e)},expression:"selection_value.number"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"6"}},[o("v-select",{attrs:{items:t.Unit,"item-text":"slection","item-value":"slection",label:"Unit",outlined:"",dense:""},model:{value:t.selection_value.enhet,callback:function(e){t.$set(t.selection_value,"enhet",e)},expression:"selection_value.enhet"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{dense:"",value:"1",type:"number",label:"Price / unit ex VAT"},model:{value:t.selection_value.pris_enhet,callback:function(e){t.$set(t.selection_value,"pris_enhet",e)},expression:"selection_value.pris_enhet"}})],1),t._v(" "),o("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[o("v-select",{attrs:{items:t.Vat,dense:"","item-text":" "+t.Vat+" %",label:"VAT",outlined:""},model:{value:t.selection_value.moms,callback:function(e){t.$set(t.selection_value,"moms",e)},expression:"selection_value.moms"}})],1),t._v(" "),o("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[o("v-select",{attrs:{items:t.Kind,label:"Kind",outlined:"",dense:""},on:{change:t.changeCheckBoxLabel},model:{value:t.selection_value.typ,callback:function(e){t.$set(t.selection_value,"typ",e)},expression:"selection_value.typ"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("p",{staticClass:"font-weight-black"},[t._v("Amount ex VAT")]),t._v(" "),o("p",{staticClass:"font-weight-medium"},[t._v(t._s(t.selection_value.pris_enhet*t.selection_value.number||"0,00")+" Kr")])])],1):t._e(),t._v(" "),o("v-row",[null!=t.selection_value?o("v-col",{attrs:{cols:"12"}},[o("v-tooltip",{attrs:{bottom:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-checkbox",t._g({attrs:{label:t.checkBoxLabel},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}},n))]}}],null,!1,1534827326)},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tRot/Rut will be accounted for if this box is checked AND if you have activated Rot/Rut on the invoice\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),null!=t.selection_value&&t.checkbox?o("v-row",[o("v-col",[o("p",{staticClass:"header"},[t._v("Select type")]),t._v(" "),o("v-radio-group",{attrs:{row:""},model:{value:t.selection_value.rotRutType,callback:function(e){t.$set(t.selection_value,"rotRutType",e)},expression:"selection_value.rotRutType"}},t._l(["Rot","Rut"],(function(t){return o("v-radio",{key:t,attrs:{label:t,value:t}})})),1)],1),t._v(" "),o("v-col",{staticClass:"d-flex",attrs:{cols:"12"}},["Goods"==t.selection_value.typ?o("v-select",{attrs:{dense:"",items:t.materialType,label:"Type of material"},model:{value:t.selection_value.materialType,callback:function(e){t.$set(t.selection_value,"materialType",e)},expression:"selection_value.materialType"}}):"services"==t.selection_value.typ?o("v-select",{attrs:{dense:"",items:t.serviceType,label:"Type of service"},model:{value:t.selection_value.materialType,callback:function(e){t.$set(t.selection_value,"materialType",e)},expression:"selection_value.materialType"}}):t._e()],1)],1):t._e()],1):t._e()],1)],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",{staticClass:"grey lighten-3 pa-5"},[o("div",[o("v-btn",{staticClass:"mt-2",attrs:{color:"error"},on:{click:t.Delete}},[t._v("Delete")]),t._v(" "),o("v-btn",{staticClass:"mt-2",attrs:{text:""},on:{click:t.resetDraggableModal}},[t._v("Cancel")]),t._v(" "),o("v-btn",{staticClass:"mt-2 d-block d-sm-inline",attrs:{disabled:t.saveAsItemBtnState},on:{click:t.saveAsItem}},[t._v("Save as item")])],1),t._v(" "),o("v-spacer"),t._v(" "),o("div",[o("v-btn",{staticClass:"mt-2",attrs:{color:"success"},on:{click:t.update}},[t._v("Update")])],1)],1)],1)],1),t._v(" "),t.draggableItems.length>0?o("v-col",{staticClass:"flex-wrap",attrs:{cols:"12"}},[o("v-row",[o("v-col",{staticClass:"align-center d-flex"},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("Total sum to pay")]),t._v(" "),o("b",[t._v(t._s(t.calculations.RoundedSumState?Math.round(t.calculations.totalSumToPay.toFixed(2)):t.calculations.totalSumToPay.toFixed(2))+" kr")])]),t._v(" "),o("v-divider",{staticClass:"mx-4",attrs:{vertical:""}})],1),t._v(" "),o("v-col",{staticClass:"align-center d-flex"},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("Amount ex VAT")]),t._v(" "),o("b",[t._v(t._s(t.calculations.amountExVAT.toFixed(2))+" kr")])])]),t._v(" "),0!=t.calculations.vat6?o("v-col",{staticClass:"align-center d-flex"},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("VAT 6%")]),t._v(" "),o("b",[t._v(t._s(t.calculations.vat6.toFixed(2))+" Kr")])])]):t._e(),t._v(" "),0!=t.calculations.vat12?o("v-col",{staticClass:"align-center d-flex"},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("VAT 12%")]),t._v(" "),o("b",[t._v(t._s(t.calculations.vat12.toFixed(2))+" Kr")])])]):t._e(),t._v(" "),0!=t.calculations.vat25?o("v-col",{staticClass:"align-center d-flex"},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("VAT 25%")]),t._v(" "),o("b",[t._v(t._s(t.calculations.vat25.toFixed(2))+" Kr")])])]):t._e(),t._v(" "),o("v-col",{staticClass:"align-center d-flex"},[o("div",{},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("Enable rounded sum")]),t._v(" "),o("v-switch",{staticClass:"ma-0 pa-0",attrs:{inset:""},model:{value:t.calculations.RoundedSumState,callback:function(e){t.$set(t.calculations,"RoundedSumState",e)},expression:"calculations.RoundedSumState"}})],1)]),t._v(" "),t.calculations.RoundedSumState?o("v-col",{staticClass:"align-center d-flex"},[o("div",{staticClass:"d-inline-block"},[o("p",{staticClass:"my-0 py-0 caption"},[t._v("Rounded sum")]),t._v(" "),o("b",[t._v(t._s(t.calculations.RoundedSum.toFixed(2))+" kr")])])]):t._e()],1)],1):t._e()],1)],1)],1),t._v(" "),o("termSection",{attrs:{todatefromDraft:t.todatefromDraft,datefromDraft:t.datesForTermSection}}),t._v(" "),o("dividerySection",{attrs:{calculations:t.calculations,draggableItems:t.draggableItems,invoiceId:t.invoiceId,userId:t.userId,invoiceOcr:t.invoiceOcr,extraInfo:t.addTextVal}})],1)],1)}),[],!1,null,"0478835a",null);e.a=_t.exports;f()(_t,{VAutocomplete:h.a,VBreadcrumbs:nt.a,VBtn:x.a,VCard:k.a,VCardActions:y.a,VCardText:y.b,VCardTitle:y.c,VCheckbox:it.a,VCol:C.a,VContainer:w.a,VDialog:T.a,VDivider:D.a,VIcon:S.a,VLayout:lt.a,VList:ct.a,VListItem:ut.a,VMenu:Z.a,VRadio:I.a,VRadioGroup:O.a,VRow:V.a,VSelect:vt.a,VSpacer:R.a,VSwitch:mt.a,VTextField:$.a,VTextarea:pt.a,VTooltip:tt.a})},575:function(t,e,o){"use strict";o.r(e);o(56);var n=o(13),r={middleware:"auth",layout:"admin",data:function(){return{draft:null}},components:{newInvoice:o(411).a},beforeMount:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/invoices/".concat(t.$route.params.id)).then(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.draft=o[0],e.next=3,t.$axios.$get("/customers/".concat(o[0].userid)).then((function(t){console.log(t)})).catch((function(t){return console.log(t)}));case 3:t.$store.commit("setCustomer",o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()}},l=o(34),component=Object(l.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._v("\n\t"+this._s(this.draft)+"\n\t"),e("newInvoice",{attrs:{draft:this.draft}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);